<!DOCTYPE html>
<html>
<head>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<link rel="stylesheet" media="screen" href="/styles/styles.css">
</head>

<body>
<div id="demo">
	<div id="inactiveCircles"></div>
</div>


<script>
  // Returns the current size of the browser viewport.
  function getBrowserDimensions(){
    var dimensions = [];

    var browserWidth = window.innerWidth ||
                      document.documentElement.clientWidth ||
                      document.body.clientWidth;

    var browserHeight = window.innerHeight ||
                        document.documentElement.clientHeight ||
                        document.body.clientHeight;

    dimensions.push({'height': browserHeight, 'width': browserWidth});

    return dimensions;
  }

  // Returns the starting coordinates for the big background circle given the position for which corner the circle should be revolving around. position indicates which corner should be the center from 0:top-left, 1:top-right, 2:bottom-right, and 3:bottom-left.
  function getStartingCoordinates(){
    var coordinates = [];
    
        coordinates.push({'x': browserDimensions[0].width-(browserDimensions[0].width*.1), 'y': browserDimensions[0].height*1.4});

    return coordinates;
  }


var browserDimensions = getBrowserDimensions();
var aspectRatio = browserDimensions[0].width / browserDimensions[0].height;

var startingCoordinates = getStartingCoordinates();
  var pathRadius = browserDimensions[0].width*.8;
  var pathMiddleRadius = browserDimensions[0].width*.75;
  var pathInnerRadius = browserDimensions[0].width*.7;


  //Returns an array of coordinates along the circumference of the large background circle to be used when drawing the initial (inactive) small circles on the curved path. Function takes numSteps as an input specifying how many points to create on the circle and will output an array or coordinates for the number of steps specified. NOTE: this is the total number of coordinates and only 1/4 of them will be on screen, so multiply the number you need to be shown by 4 when suplying numSteps.
  function pointsOnCircle(numSteps){
    coordinates = [];
    for(var i = 0; i < numSteps; i++) {
      var x = startingCoordinates[0].x + pathMiddleRadius * Math.cos(2 * Math.PI * i / numSteps);
      var y = startingCoordinates[0].y + pathMiddleRadius * Math.sin(2 * Math.PI * i / numSteps); 
      coordinates.push({
        'x': x,
        'y': y
      });
    }
    return coordinates;
  }

  var numSteps = 12;
  var circlePoints = pointsOnCircle(numSteps);
  
  console.log(circlePoints);


//Draw the SVG Canvas to hold objects we will insert
var bubblesDemo = d3.select("#demo").
  append("svg:svg").
  attr("id", "svgCanvas").
  attr("width", browserDimensions[0].width).
  attr("height", browserDimensions[0].height).
  attr("viewbox", "0 0 " + browserDimensions[0].width +" "+ browserDimensions[0].height).
  attr("preserveAspectRatio", "xMidYMid");

//Draw the big circle along with its outer border
bubblesDemo.append("svg:circle").
  attr("cx", startingCoordinates[0].x).
  attr("cy", startingCoordinates[0].y).
  attr("r", pathRadius).
  attr("stroke", "#eeefec").
  attr("stroke-width", 15).
  attr("id", "path").
  attr("class", "black")

//Draw a smaller circle and use its outer border to make the inner border of our curve path
bubblesDemo.append("svg:circle").
  attr("cx", startingCoordinates[0].x).
  attr("cy", startingCoordinates[0].y).
  attr("r", pathInnerRadius).
  attr("stroke", "#eeefec").
  attr("stroke-width", 15).
  attr("fill", "#ffffff")

//Draw the expanded (active) circle on the path line we have created
// bubblesDemo.append("svg:circle").
//   attr("cx", 650).
//   attr("cy", 350).
//   attr("r", 118).
//   attr("stroke", "#4068dd").
//   attr("stroke-width", 12).
//   attr("fill", "#ffffff")

//Bind data from circlePoints and draw circles on the outer edge of the big circle curve
bubblesDemo.selectAll("#smallCircle")
  .data(circlePoints)
  .enter().append("svg:circle")
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; })
    .attr("r", 40)
    .style("fill", "#ffffff");


//Code below allows the SVG canvas area to respond to updated browser dimensions when the screen changes sizes.
var canvas = $("#svgCanvas");
$(window).on("resize", function(){
  var targetWidth = canvas.parent().width();
  canvas.attr("width", targetWidth);
  canvas.attr("height", Math.round(targetWidth / aspectRatio));
});


</script>



</body>
</html>